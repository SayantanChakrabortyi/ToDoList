<!DOCTYPE html>
<html>
<head>
	<title>ToDo List</title>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

<h1><samp id="todo">Let's </samp><samp id="plan">Plan </samp><samp id="todo">it...</samp></h1>

<input type="text" id="todoItem" placeholder="What ToDo?" autofocus>

<button id="add" onclick="check(document.getElementById('todoItem').value)">+</button>

<div id="container">
	<!-- Items will get inserted inside this div -->

	
	<!-- <div id="item">

	<input type="checkbox" id="chkbox" onclick="done(document.getElementById('itemAdded'))">

	<samp id="itemAdded"></samp>

	<samp id="edit"Â  onclick="edit(document.getElementById('itemAdded'))">Edit</samp>

	<samp id="del" onclick="del(document.getElementById('item'))">Remove</samp>

	</div> -->
</div>

<script>
// addButton.addEventListener('click', check);
// addButton. addEventListener('click', check);
   
   window.addEventListener('keydown', (e) =>{
	if(e.which == 13){
		check(document.getElementById('todoItem').value);
	}
})

let i = 0;
let check =(data)=>{
	if (data != ""){
		let nodeDiv = document.createElement("div");
			nodeDiv.setAttribute("id", "item-"+i);
			nodeDiv.setAttribute("class", "item");
			// console.log(document.getElementById("item"+n))

		let nodeChk = document.createElement("input");
			nodeChk.setAttribute("type", "checkbox");
			nodeChk.setAttribute("id", "chkbox");
			nodeChk.setAttribute("onclick", "done(this.parentNode)");

		let nodeText = document.createElement("input");
			nodeText.setAttribute("type","text");
			nodeText.setAttribute("id", "itemAdded");
			nodeText.setAttribute("class", "itemAdded");
			nodeText.setAttribute("disabled", true);
			nodeText.setAttribute("value",data);
			// if (data.length < 30){
			// 	nodeText.setAttribute("value",data);
			// }
			// else{
			// 	let sData = data.slice(0,30) + "...";
			// 	nodeText.setAttribute("value",nData);
			// }
			nodeText.style.fontStyle = 'italic';
			nodeText.style.color = "gray";

		let nodeEdit = document.createElement("samp");
			nodeEdit.setAttribute("id", "edit");
			nodeEdit.setAttribute("onclick", "edit(this.parentNode)");
			nodeEdit.style.color = "lime";
			var edit = document.createTextNode("Edit");
			nodeEdit.appendChild(edit);

		let nodeRemove = document.createElement("samp");
			nodeRemove.setAttribute("id", "del");
			nodeRemove.setAttribute("onclick", "del(this.parentNode)");
			nodeRemove.style.color = "red";
			var remove = document.createTextNode("Remove");
			nodeRemove.appendChild(remove);

		nodeDiv.appendChild(nodeChk);
		nodeDiv.appendChild(nodeText);
		nodeDiv.appendChild(nodeEdit);
		nodeDiv.appendChild(nodeRemove);
		document.getElementById("container").appendChild(nodeDiv);

		document.getElementById("todoItem").value = "";
		i++;
	}
}

let done = (data)=>{
	let text = data.querySelector("#itemAdded").value;
	if (data.querySelector("#chkbox").checked == true){
		if (data.querySelector("#edit").innerHTML == "Save"){
			data.querySelector("#itemAdded").style.color = "white";
		}
		else{
			// data.querySelector("#itemAdded").value = document.write(text.strike());
			// console.log(document.write(text.strike()));
			data.querySelector("#itemAdded").style.color = "cyan";
		}
	}
	else{
		if (data.querySelector("#edit").innerHTML == "Save"){
			data.querySelector("#itemAdded").style.color = "white";
		}
		else{
			data.querySelector("#itemAdded").style.color = "gray";
		}
	}
}

let edit = (data)=>{
	// console.log(data.querySelector("#itemAdded"));

	//Method using QuerySelector Method
	if (data.querySelector("#edit").innerHTML == "Edit"){
		data.querySelector("#itemAdded").disabled = false;
		data.querySelector("#itemAdded").style.color = "white";
		data.querySelector("#edit").innerHTML = "Save";

	//Another method using CHILDREN PROPERTY
	// if (data.children[2].innerHTML == "Edit"){
	// 	data.children[1].disabled = false;
	// 	data.children[1].style.color = "white";
	// 	data.children[2].innerHTML = "Save";

		// let edt = document.getElementById("edit");
		// edt.innerHTML = "Save";
		// edt.style.fontStyle = 'italic';
	}
	else{
		if (data.querySelector("#chkbox").checked == true){
			data.querySelector("#itemAdded").disabled = true;
			data.querySelector("#itemAdded").style.color = "cyan";
			data.querySelector("#edit").innerHTML = "Edit";
		}
		else{
			data.querySelector("#itemAdded").disabled = true;
			data.querySelector("#itemAdded").style.color = "gray";
			data.querySelector("#edit").innerHTML = "Edit";
		}
	}
}

let del = (data)=>{
	// console.log(data);
	const container = document.getElementById('container');
	container.removeChild(data);
 }
</script>
</body>
</html>